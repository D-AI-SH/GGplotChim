<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>中文字体测试</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .font-test {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .font-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        .test-text {
            font-size: 18px;
            margin: 5px 0;
        }
        h1 {
            color: #333;
        }
        .detection-result {
            background: #e8f5e9;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
        }
        .not-available {
            background: #ffebee;
        }
    </style>
</head>
<body>
    <h1>🔍 系统中文字体检测工具</h1>
    
    <div class="test-container">
        <h2>常用中文字体测试</h2>
        <p>下面的文字应该以不同的字体显示。如果看起来都一样，说明该字体不可用。</p>
        
        <div class="font-test">
            <div class="font-name">SimSun (宋体)</div>
            <div class="test-text" style="font-family: 'SimSun', serif;">
                测试文字：煤炭、天然气、石油、核能、水电、风能、太阳能、生物质
            </div>
        </div>
        
        <div class="font-test">
            <div class="font-name">SimHei (黑体)</div>
            <div class="test-text" style="font-family: 'SimHei', sans-serif;">
                测试文字：煤炭、天然气、石油、核能、水电、风能、太阳能、生物质
            </div>
        </div>
        
        <div class="font-test">
            <div class="font-name">Microsoft YaHei (微软雅黑)</div>
            <div class="test-text" style="font-family: 'Microsoft YaHei', sans-serif;">
                测试文字：煤炭、天然气、石油、核能、水电、风能、太阳能、生物质
            </div>
        </div>
        
        <div class="font-test">
            <div class="font-name">Microsoft YaHei UI</div>
            <div class="test-text" style="font-family: 'Microsoft YaHei UI', sans-serif;">
                测试文字：煤炭、天然气、石油、核能、水电、风能、太阳能、生物质
            </div>
        </div>
        
        <div class="font-test">
            <div class="font-name">KaiTi (楷体)</div>
            <div class="test-text" style="font-family: 'KaiTi', serif;">
                测试文字：煤炭、天然气、石油、核能、水电、风能、太阳能、生物质
            </div>
        </div>
        
        <div class="font-test">
            <div class="font-name">FangSong (仿宋)</div>
            <div class="test-text" style="font-family: 'FangSong', serif;">
                测试文字：煤炭、天然气、石油、核能、水电、风能、太阳能、生物质
            </div>
        </div>
    </div>
    
    <div class="test-container">
        <h2>JavaScript 字体检测</h2>
        <div id="detection-results"></div>
    </div>
    
    <script>
        // 使用 Canvas API 检测字体是否可用
        function isFontAvailable(fontName) {
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            
            // 使用一个基准字体
            const baseFont = 'monospace';
            const testString = '煤炭天然气石油';
            
            // 测量基准字体的宽度
            context.font = `72px ${baseFont}`;
            const baseWidth = context.measureText(testString).width;
            
            // 测量目标字体的宽度
            context.font = `72px "${fontName}", ${baseFont}`;
            const testWidth = context.measureText(testString).width;
            
            // 如果宽度不同，说明字体可用
            return baseWidth !== testWidth;
        }
        
        // 测试常用中文字体
        const fontsToTest = [
            'SimSun',
            'SimHei',
            'Microsoft YaHei',
            'Microsoft YaHei UI',
            'KaiTi',
            'FangSong',
            'NSimSun',
            'PingFang SC',
            'Hiragino Sans GB',
            'Source Han Sans CN',
            'Noto Sans CJK SC'
        ];
        
        const resultsDiv = document.getElementById('detection-results');
        
        fontsToTest.forEach(font => {
            const available = isFontAvailable(font);
            const resultDiv = document.createElement('div');
            resultDiv.className = `detection-result ${available ? '' : 'not-available'}`;
            resultDiv.innerHTML = `
                <strong>${font}:</strong> 
                ${available ? '✅ 可用' : '❌ 不可用'}
            `;
            resultsDiv.appendChild(resultDiv);
        });
        
        // 输出到控制台
        console.log('=== 字体检测结果 ===');
        fontsToTest.forEach(font => {
            console.log(`${font}: ${isFontAvailable(font) ? '✅ 可用' : '❌ 不可用'}`);
        });
    </script>
</body>
</html>
