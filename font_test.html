<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸­æ–‡å­—ä½“æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .font-test {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .font-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        .test-text {
            font-size: 18px;
            margin: 5px 0;
        }
        h1 {
            color: #333;
        }
        .detection-result {
            background: #e8f5e9;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
        }
        .not-available {
            background: #ffebee;
        }
    </style>
</head>
<body>
    <h1>ğŸ” ç³»ç»Ÿä¸­æ–‡å­—ä½“æ£€æµ‹å·¥å…·</h1>
    
    <div class="test-container">
        <h2>å¸¸ç”¨ä¸­æ–‡å­—ä½“æµ‹è¯•</h2>
        <p>ä¸‹é¢çš„æ–‡å­—åº”è¯¥ä»¥ä¸åŒçš„å­—ä½“æ˜¾ç¤ºã€‚å¦‚æœçœ‹èµ·æ¥éƒ½ä¸€æ ·ï¼Œè¯´æ˜è¯¥å­—ä½“ä¸å¯ç”¨ã€‚</p>
        
        <div class="font-test">
            <div class="font-name">SimSun (å®‹ä½“)</div>
            <div class="test-text" style="font-family: 'SimSun', serif;">
                æµ‹è¯•æ–‡å­—ï¼šç…¤ç‚­ã€å¤©ç„¶æ°”ã€çŸ³æ²¹ã€æ ¸èƒ½ã€æ°´ç”µã€é£èƒ½ã€å¤ªé˜³èƒ½ã€ç”Ÿç‰©è´¨
            </div>
        </div>
        
        <div class="font-test">
            <div class="font-name">SimHei (é»‘ä½“)</div>
            <div class="test-text" style="font-family: 'SimHei', sans-serif;">
                æµ‹è¯•æ–‡å­—ï¼šç…¤ç‚­ã€å¤©ç„¶æ°”ã€çŸ³æ²¹ã€æ ¸èƒ½ã€æ°´ç”µã€é£èƒ½ã€å¤ªé˜³èƒ½ã€ç”Ÿç‰©è´¨
            </div>
        </div>
        
        <div class="font-test">
            <div class="font-name">Microsoft YaHei (å¾®è½¯é›…é»‘)</div>
            <div class="test-text" style="font-family: 'Microsoft YaHei', sans-serif;">
                æµ‹è¯•æ–‡å­—ï¼šç…¤ç‚­ã€å¤©ç„¶æ°”ã€çŸ³æ²¹ã€æ ¸èƒ½ã€æ°´ç”µã€é£èƒ½ã€å¤ªé˜³èƒ½ã€ç”Ÿç‰©è´¨
            </div>
        </div>
        
        <div class="font-test">
            <div class="font-name">Microsoft YaHei UI</div>
            <div class="test-text" style="font-family: 'Microsoft YaHei UI', sans-serif;">
                æµ‹è¯•æ–‡å­—ï¼šç…¤ç‚­ã€å¤©ç„¶æ°”ã€çŸ³æ²¹ã€æ ¸èƒ½ã€æ°´ç”µã€é£èƒ½ã€å¤ªé˜³èƒ½ã€ç”Ÿç‰©è´¨
            </div>
        </div>
        
        <div class="font-test">
            <div class="font-name">KaiTi (æ¥·ä½“)</div>
            <div class="test-text" style="font-family: 'KaiTi', serif;">
                æµ‹è¯•æ–‡å­—ï¼šç…¤ç‚­ã€å¤©ç„¶æ°”ã€çŸ³æ²¹ã€æ ¸èƒ½ã€æ°´ç”µã€é£èƒ½ã€å¤ªé˜³èƒ½ã€ç”Ÿç‰©è´¨
            </div>
        </div>
        
        <div class="font-test">
            <div class="font-name">FangSong (ä»¿å®‹)</div>
            <div class="test-text" style="font-family: 'FangSong', serif;">
                æµ‹è¯•æ–‡å­—ï¼šç…¤ç‚­ã€å¤©ç„¶æ°”ã€çŸ³æ²¹ã€æ ¸èƒ½ã€æ°´ç”µã€é£èƒ½ã€å¤ªé˜³èƒ½ã€ç”Ÿç‰©è´¨
            </div>
        </div>
    </div>
    
    <div class="test-container">
        <h2>JavaScript å­—ä½“æ£€æµ‹</h2>
        <div id="detection-results"></div>
    </div>
    
    <script>
        // ä½¿ç”¨ Canvas API æ£€æµ‹å­—ä½“æ˜¯å¦å¯ç”¨
        function isFontAvailable(fontName) {
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            
            // ä½¿ç”¨ä¸€ä¸ªåŸºå‡†å­—ä½“
            const baseFont = 'monospace';
            const testString = 'ç…¤ç‚­å¤©ç„¶æ°”çŸ³æ²¹';
            
            // æµ‹é‡åŸºå‡†å­—ä½“çš„å®½åº¦
            context.font = `72px ${baseFont}`;
            const baseWidth = context.measureText(testString).width;
            
            // æµ‹é‡ç›®æ ‡å­—ä½“çš„å®½åº¦
            context.font = `72px "${fontName}", ${baseFont}`;
            const testWidth = context.measureText(testString).width;
            
            // å¦‚æœå®½åº¦ä¸åŒï¼Œè¯´æ˜å­—ä½“å¯ç”¨
            return baseWidth !== testWidth;
        }
        
        // æµ‹è¯•å¸¸ç”¨ä¸­æ–‡å­—ä½“
        const fontsToTest = [
            'SimSun',
            'SimHei',
            'Microsoft YaHei',
            'Microsoft YaHei UI',
            'KaiTi',
            'FangSong',
            'NSimSun',
            'PingFang SC',
            'Hiragino Sans GB',
            'Source Han Sans CN',
            'Noto Sans CJK SC'
        ];
        
        const resultsDiv = document.getElementById('detection-results');
        
        fontsToTest.forEach(font => {
            const available = isFontAvailable(font);
            const resultDiv = document.createElement('div');
            resultDiv.className = `detection-result ${available ? '' : 'not-available'}`;
            resultDiv.innerHTML = `
                <strong>${font}:</strong> 
                ${available ? 'âœ… å¯ç”¨' : 'âŒ ä¸å¯ç”¨'}
            `;
            resultsDiv.appendChild(resultDiv);
        });
        
        // è¾“å‡ºåˆ°æ§åˆ¶å°
        console.log('=== å­—ä½“æ£€æµ‹ç»“æœ ===');
        fontsToTest.forEach(font => {
            console.log(`${font}: ${isFontAvailable(font) ? 'âœ… å¯ç”¨' : 'âŒ ä¸å¯ç”¨'}`);
        });
    </script>
</body>
</html>
