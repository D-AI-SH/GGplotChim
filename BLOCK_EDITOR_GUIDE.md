# 积木编辑器使用指南

## 功能概述

积木编辑器允许用户通过双击积木来打开一个编辑对话框，在其中可以修改积木的所有可配置参数。

## 使用方法

### 1. 打开编辑器

- **双击任意积木**：在画布上双击任何积木，将会打开编辑器对话框

### 2. 编辑参数

编辑器对话框包含以下部分：

#### 变量赋值（可选）
- 在"赋值给变量"输入框中，您可以设置一个变量名来保存积木的结果
- 例如：`p`、`data`、`result` 等
- 如果留空，积木将不会被赋值给任何变量

#### 积木参数
- 每个积木都有其特定的参数
- 参数类型包括：
  - **文本输入**：用于输入文本或代码
  - **数字输入**：用于输入数值
  - **下拉选择**：从预定义选项中选择
  - **复选框**：开启或关闭某个功能
  - **颜色选择器**：选择颜色值
- 标有 `*` 的参数为必填项

#### 积木信息
- 显示积木的类型和描述
- 对于容器型积木（如 `for` 循环），会显示特殊提示

### 3. 保存或取消

- **保存**：点击"保存"按钮应用所有更改
- **取消**：点击"取消"按钮或点击对话框外部放弃更改
- **关闭按钮**：点击右上角的 ✕ 按钮关闭编辑器

## 示例

### 示例 1：编辑 ggplot 初始化积木

1. 双击 `ggplot()` 积木
2. 在"赋值给变量"中输入 `p`
3. 在"数据集"参数中输入 `mtcars`
4. 点击"保存"

结果：积木将生成代码 `p <- ggplot(mtcars)`

### 示例 2：编辑 geom_point 积木

1. 双击 `geom_point()` 积木
2. 修改 `size` 参数为 `3`
3. 修改 `color` 参数为 `#FF0000`（红色）
4. 点击"保存"

结果：积木参数将更新，生成的代码也会相应改变

### 示例 3：编辑赋值积木

1. 双击 `<- 赋值` 积木
2. 在"变量名"中输入 `my_data`
3. 在"赋值内容"中输入 `read.csv("data.csv")`
4. 点击"保存"

结果：积木将生成代码 `my_data <- read.csv("data.csv")`

## 技术特性

### 实时同步
- 编辑器修改的参数会立即同步到积木状态
- 代码预览会自动更新以反映更改

### 智能默认值
- 每个参数都有预设的默认值
- 首次打开编辑器时，会显示当前积木的参数值

### 类型验证
- 数字输入框只接受数字
- 颜色选择器确保颜色值的有效性

### 容器型积木支持
- 对于 `for` 循环、`if` 语句等容器型积木
- 编辑器会显示特殊的提示信息
- 可以编辑循环变量、条件表达式等参数

## 键盘快捷键

目前编辑器支持以下交互：
- **ESC 键**：可以考虑添加此功能来关闭编辑器
- **Enter 键**：可以考虑添加此功能来保存更改

## 注意事项

1. **必填参数**：确保所有标有 `*` 的必填参数都已填写
2. **变量命名**：变量名应遵循 R 语言命名规则（字母、数字、下划线，不能以数字开头）
3. **参数格式**：某些参数需要特定格式（如颜色值、函数调用等）
4. **连接关系**：编辑积木参数不会影响其与其他积木的连接关系

## 未来改进

可能的功能增强：
- [ ] 添加参数提示和自动完成
- [ ] 支持多行文本输入
- [ ] 参数历史记录
- [ ] 参数模板
- [ ] 快捷键支持（ESC、Enter 等）
- [ ] 参数验证和错误提示
- [ ] 拖拽调整对话框大小

## 相关文档

- [USER_GUIDE.md](./USER_GUIDE.md) - 完整用户指南
- [CODE_EDITING_GUIDE.md](./CODE_EDITING_GUIDE.md) - 代码编辑指南
- [QUICKSTART.md](./QUICKSTART.md) - 快速开始

